import{C as B,G as L,T as S,A as V}from"./index.DSBjsumH.js";import"./hoisted.N2XxB48v.js";import"./_commonjsHelpers.Cpj98o6Y.js";let e={w:!1,s:!1,up:!1,down:!1,paddle1:!1,paddle2:!1};window.addEventListener("keydown",function(t){switch(t.code){case"KeyW":e.w=!0;break;case"KeyS":e.s=!0;break;case"ArrowUp":e.up=!0;break;case"ArrowDown":e.down=!0;break}t.preventDefault()});window.addEventListener("keyup",function(t){switch(t.code){case"KeyW":e.w=!1;break;case"KeyS":e.s=!1;break;case"ArrowUp":e.up=!1;break;case"ArrowDown":e.down=!1;break}t.preventDefault()});function P(t){return!(n.x-r()>t.x+y()||t.x>n.x+r()||n.y-r()>t.y+s()||t.y>n.y+r())}let h=new B,d=160,l=90,a=function(){return 0},y=function(){return Math.round(d/80)},s=function(){return Math.round(l/5)},x=function(){return s()/8},i=new L;i.rect(0,0,y(),s());i.fill("black");i.position.y=l/2-s()/2;let o=new L;o.rect(0,0,y(),s());o.fill("black");o.position.y=l/2-s()/2;h.addChild(i);h.addChild(o);function z(){i.position.y=Math.min(l-a()-s(),Math.max(a(),i.position.y)),o.position.y=Math.min(l-a()-s(),Math.max(a(),o.position.y))}i.interactive=!0;o.interactive=!0;i.buttonMode=!0;o.buttonMode=!0;i.on("mousedown",v).on("touchstart",v).on("mouseup",u).on("mouseupoutside",u).on("touchend",u).on("touchendoutside",u).on("mousemove",M).on("touchmove",M);o.on("mousedown",v).on("touchstart",v).on("mouseup",u).on("mouseupoutside",u).on("touchend",u).on("touchendoutside",u).on("mousemove",M).on("touchmove",M);function v(t){this===i?e.paddle1=!0:this===o&&(e.paddle2=!0),this.data=t.data,this.dragging=!0,this.sy=this.data.getLocalPosition(this).y}function u(t){this===i?e.paddle1=!1:this===o&&(e.paddle2=!1),this.dragging=!1,this.data=null}function M(t){if(this.dragging){let c=this.data.getLocalPosition(this.parent);c.y-this.sy>a()&&c.y-this.sy<l-a()-s()&&(this.position.y=c.y-this.sy)}}let p=new S({text:" ->",fill:"black"});h.addChild(p);let E=0,T=0,A=new S({text:"0",fill:"black"}),C=new S({text:"0",fill:"black"});h.addChild(A);h.addChild(C);let m,b,K=Math.PI/4,r=function(){return Math.round(Math.min(l,d)/80)},f=r(),g,w,n=new L;n.circle(0,0,r());n.fill("black");h.addChild(n);function G(){n.position.x=d/2,n.position.y=l/2,g=f,w=0}function D(t){G(),m=0,b=!0,t===1&&(e.w||e.s||e.paddle1)?(g*=-1,b=!1,p.text=""):t===2&&(e.up||e.down||e.paddle2)?(b=!1,p.text=""):setTimeout(D,1,t)}let k=new V;k.stage.addChild(h);function H(){if(e.w&&i.position.y>a()&&(i.position.y-=x()),e.s&&i.position.y<l-a()-s()&&(i.position.y+=x()),e.up&&o.position.y>a()&&(o.position.y-=x()),e.down&&o.position.y<l-a()-s()&&(o.position.y+=x()),z(),P(i)){let t=(i.position.y+s()/2-n.position.y)*K/(s()/2);g=f*Math.cos(t),w=f*-Math.sin(t),m++}if(P(o)){let t=(o.position.y+s()/2-n.position.y)*K/(s()/2);g=f*-Math.cos(t),w=f*-Math.sin(t),m++}(n.position.y<=a()||n.position.y>=l-a())&&(w*=-1),n.position.x<=0?(T++,C.text=T,p.text="->",D(2)):n.position.x>=d&&(E++,A.text=E,p.text="<-",D(1)),f=r()*(1+m/10),b||(n.position.x+=g,n.position.y+=w)}function W(){l=document.querySelector("#pong").offsetHeight,d=document.querySelector("#pong").offsetWidth,i.height=s(),i.width=y(),o.height=s(),o.width=y(),i.position.x=a(),o.position.x=d-a()-y(),z(),n.height=2*r(),n.width=2*r(),A.position.x=d/4-A.width/2,C.position.x=d*3/4-C.width/2,p.position.x=d/2-p.width/2}D(2);let q=!0;document.addEventListener("astro:page-load",async function(t){if(t.target.title==="Pong"){let c=document.querySelector("#pong");q&&(await k.init({backgroundAlpha:0,resizeTo:c}),q=!1,k.ticker.add(I=>H())),c.insertBefore(k.canvas,c.firstChild),window.addEventListener("resize",W),W()}});
