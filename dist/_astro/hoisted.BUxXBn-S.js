import{S as c}from"./sweetalert2.Cs7ISwYJ.js";import"./hoisted.N2XxB48v.js";import"./_commonjsHelpers.Cpj98o6Y.js";let n=[],s=0;async function u(){await c.fire({title:"You won! It took "+s+" guesses",icon:"success"}),await d()}function y(){document.querySelector("#key-mode").style.display="block",document.querySelector("#guess-mode").style.display="none",document.querySelector("#mode").innerHTML="KEY MODE"}function a(){document.querySelector("#key-mode").style.display="none",document.querySelector("#guess-mode").style.display="block",document.querySelector("#mode").innerHTML="GUESS MODE",document.querySelector("#history").innerHTML="",document.querySelector("#history-header").innerHTML="",s=0}function m(t){let o=0,r=0,l={},i={};for(let e=0;e<n.length;e++)l[n[e]]?l[n[e]]++:l[n[e]]=1;for(let e=0;e<t.length;e++)i[t[e]]?i[t[e]]++:i[t[e]]=1;for(let e in l)if(i[e])for(;l[e]>0&&i[e]>0;)r++,l[e]--,i[e]--;for(let e=0;e<n.length;e++)n[e]===t[e]&&(o++,r--,l[n[e]]--,i[t[e]]--);return{right:o,wrong:r}}function f(t){let o=document.querySelectorAll("#key > .color-selector > .preview");for(let r=0;r<4;r++)if(o[r].dataset.color)n[r]=o[r].dataset.color;else{c.fire("Error","Make sure every color in the key is set","error");return}a()}async function p(){let t=[],o=document.querySelectorAll("#guess > .color-selector > .preview");for(let e=0;e<4;e++)if(o[e].dataset.color)t[e]=o[e].dataset.color;else{await c.fire("Error","Make sure every color in your guess is set","error");return}s++,document.querySelector("#history-header").innerHTML="History";let r=m(t),l="";for(let e=0;e<4;e++)l+='<div class="color-selector"><div class="square" data-color="'+t[e]+'"></div></div> ';l+='<div class="square">';for(let e=0;e<r.right;e++)l+='<div class="minisquare right"></div>';for(let e=0;e<r.wrong;e++)l+='<div class="minisquare wrong"></div>';l+="</div>";let i=document.createElement("div");i.innerHTML=l,document.querySelector("#history").insertBefore(i,document.querySelector("#history").firstChild),r.right===4&&await u()}function g(t){let o=t.target;delete o.dataset.color;let r=t.target.parentElement.children[0];r.style.display="block"}function h(t){let o=t.target.parentElement.parentElement.children[1];o.dataset.color=t.target.dataset.color;let r=t.target.parentElement;r.style.display="none"}async function d(){if((await c.fire({title:"Choose a game type",text:"You can either play against a computer, or against a friend",confirmButtonText:"Play against a person",cancelButtonText:"Play against a computer",showConfirmButton:!0,showCancelButton:!0})).isConfirmed)await c.fire({title:"Get ready!",text:"Don't let the other person look before you've submitted your key!"}),y();else{let o=["red","orange","yellow","green","blue","purple"];for(let r=0;r<4;r++)n[r]=o[Math.floor(Math.random()*o.length)];a()}}document.addEventListener("astro:page-load",async function(t){if(t.target.title==="Mastermind"){for(let o of document.querySelectorAll(".color-selector > .preview"))o.addEventListener("click",g);for(let o of document.querySelectorAll(".color-selector > .dropdown > div"))o.addEventListener("click",h);document.querySelector('button[name="submitKey"]').addEventListener("click",f),document.querySelector('button[name="submitGuess"]').addEventListener("click",p),await d()}});
